local
separator
=
package
.config
:sub(
1
,
1
)
local
function
dedup
(s)
return
s
:gsub(
separator
..
(
'+'
)
,
separator
)
end
local
function
format
(s,left,right)
s
=
left
and
(
separator
..
s
)
or
s
:gsub(
(
"^"
..
tostring(
separator
)
..
"+"
)
,
(
''
)
)
s
=
right
and
(
s
..
separator
)
or
s
:gsub(
(
tostring(
separator
)
..
"+$"
)
,
(
''
)
)
return
dedup(
s
)
end
local
function
trim
(s,ltrim,rtrim)
if ltrim == nil then ltrim = 
true
end
if rtrim == nil then rtrim = 
true
end
if
ltrim
then
s
=
s
:gsub(
(
"^"
..
tostring(
separator
)
..
"+"
)
,
(
''
)
)
end
if
rtrim
then
s
=
s
:gsub(
(
tostring(
separator
)
..
"+$"
)
,
(
''
)
)
end
return
dedup(
s
)
end
local
function
pad
(s,lpad,rpad)
if lpad == nil then lpad = 
true
end
if rpad == nil then rpad = 
true
end
if
lpad
then
s
=
separator
..
s
end
if
rpad
then
s
=
s
..
separator
end
return
dedup(
s
)
end
local
function
join
(...)
return
dedup(
table
.concat(
{
...
,
}
,
separator
)
)
end
local
function
basename
(s)
return
s
:match(
(
"[^"
..
tostring(
separator
)
..
"]*$"
)
)
end
local
function
dirname
(s)
return
s
:gsub(
(
"[^"
..
tostring(
separator
)
..
"]*$"
)
,
(
''
)
)
end
return { separator=separator,dedup=dedup,format=format,trim=trim,pad=pad,join=join,basename=basename,dirname=dirname }
-- Compiled with Erde 0.5-1
-- __ERDE_COMPILED__